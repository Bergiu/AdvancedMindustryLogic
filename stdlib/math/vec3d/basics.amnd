struct Vec3D(x, y, z)

function Vec3D::rot_x(Vec3D Vec3D::rot_x::this, Vec3D::rot_x::alpha, Vec3D *Vec3D::rot_x::out) {
    # Rotates a vector on the x axis
    Vec3D::rot_x::sina = sin(Vec3D::rot_x::alpha)
    Vec3D::rot_x::cosa = cos(Vec3D::rot_x::alpha)
    Vec3D::rot_x::out.x = Vec3D::rot_x::this.x
    Vec3D::rot_x::out.y = Vec3D::rot_x::cosa * Vec3D::rot_x::this.y - Vec3D::rot_x::sina * Vec3D::rot_x::this.z
    Vec3D::rot_x::out.z = Vec3D::rot_x::sina * Vec3D::rot_x::this.y + Vec3D::rot_x::cosa * Vec3D::rot_x::this.z
}

function Vec3D::rot_y(Vec3D Vec3D::rot_y::this, Vec3D::rot_y::alpha, Vec3D *Vec3D::rot_y::out) {
    # Rotates a vector on the y axis
    Vec3D::rot_y::sina = sin(Vec3D::rot_y::alpha)
    Vec3D::rot_y::cosa = cos(Vec3D::rot_y::alpha)
    Vec3D::rot_y::out.x = Vec3D::rot_y::cosa * Vec3D::rot_y::this.x + Vec3D::rot_y::sina * Vec3D::rot_y::this.z
    Vec3D::rot_y::out.y = Vec3D::rot_y::this.y
    Vec3D::rot_y::out.z = Vec3D::rot_y::cosa * Vec3D::rot_y::this.z - Vec3D::rot_y::sina * Vec3D::rot_y::this.x
}

function Vec3D::rot_z(Vec3D Vec3D::rot_y::this, Vec3D::rot_y::alpha, Vec3D *Vec3D::rot_y::out) {
    # Rotates a vector on the z axis
    Vec3D::rot_y::sina = sin(Vec3D::rot_y::alpha)
    Vec3D::rot_y::cosa = cos(Vec3D::rot_y::alpha)
    Vec3D::rot_y::out.x = Vec3D::rot_y::cosa * Vec3D::rot_y::this.x - Vec3D::rot_y::sina * Vec3D::rot_y::this.y
    Vec3D::rot_y::out.y = Vec3D::rot_y::sina * Vec3D::rot_y::this.x + Vec3D::rot_y::cosa * Vec3D::rot_y::this.y
    Vec3D::rot_y::out.z = Vec3D::rot_y::this.z
}

function Vec3D::scale(Vec3D Vec3D::scale::a, Vec3D::scale::scalar, Vec3D *Vec3D::scale::out) {
    Vec3D::scale::out.x = Vec3D::scale::a.x * Vec3D::scale::scalar
    Vec3D::scale::out.y = Vec3D::scale::a.y * Vec3D::scale::scalar
    Vec3D::scale::out.z = Vec3D::scale::a.z * Vec3D::scale::scalar
}

function Vec3D::add(Vec3D Vec3D::add::a, Vec3D Vec3D::add::b, Vec3D *Vec3D::add::out) {
    Vec3D::add::out.x = Vec3D::add::a.x + Vec3D::add::b.x
    Vec3D::add::out.y = Vec3D::add::a.y + Vec3D::add::b.y
    Vec3D::add::out.z = Vec3D::add::a.z + Vec3D::add::b.z
}

function Vec3D::sub(Vec3D Vec3D::sub::a, Vec3D Vec3D::sub::b, Vec3D *Vec3D::sub::out) {
    Vec3D::sub::out.x = Vec3D::sub::a.x - Vec3D::sub::b.x
    Vec3D::sub::out.y = Vec3D::sub::a.y - Vec3D::sub::b.y
    Vec3D::sub::out.z = Vec3D::sub::a.z - Vec3D::sub::b.z
}

function Vec3D::len(Vec3D Vec3D::len::a, *Vec3D::len::out) {
    Vec3D::len::out = sqrt(Vec3D::len::a.x ** 2 + Vec3D::len::a.y ** 2 + Vec3D::len::a.z ** 2)
}

function Vec3D::norm(Vec3D Vec3D::norm::a, Vec3D *Vec3D::norm::out) {
    Vec3D::norm::scalar = 1 / sqrt(Vec3D::norm::a.x ** 2 + Vec3D::norm::a.y ** 2 + Vec3D::norm::a.z ** 2)
    Vec3D::norm::out.x = Vec3D::norm::a.x * Vec3D::norm::scalar
    Vec3D::norm::out.y = Vec3D::norm::a.y * Vec3D::norm::scalar
    Vec3D::norm::out.z = Vec3D::norm::a.z * Vec3D::norm::scalar
}

function Vec3D::scalar_product(Vec3D Vec3D::scalar_product::a, Vec3D Vec3D::scalar_product::b, *Vec3D::scalar_product::out) {
    Vec3D::scalar_product::x = Vec3D::scalar_product::a.x * Vec3D::scalar_product::b.x
    Vec3D::scalar_product::y = Vec3D::scalar_product::a.y * Vec3D::scalar_product::b.y
    Vec3D::scalar_product::z = Vec3D::scalar_product::a.z * Vec3D::scalar_product::b.z
    Vec3D::scalar_product::out = Vec3D::scalar_product::x + Vec3D::scalar_product::y + Vec3D::scalar_product::z
}
